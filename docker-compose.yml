# SPDX-FileCopyrightText: 2023 Baking Bad <hello@bakingbad.dev>
#
# SPDX-License-Identifier: MIT

version: "3.8"
services:
  operator:
    image: ghcr.io/baking-bad/tz-rollup-operator:${TAG}
    command: rollup-node
    restart: "no"
    env_file:
      - local.env
      # ROLLUP_ADDRESS e.g. sr1...
      # OPERATOR_KEY e.g. unencrypted:edsk...
    ports:
      - 127.0.0.1:8932:8932
    networks:
      - internal

  facade:
    image: ghcr.io/baking-bad/tz-rollup-facade:latest
    command: --endpoint http://operator:8932 --rpc-addr "0.0.0.0"
    restart: always
    ports:
      - 127.0.0.1:8732:8732
    networks:
      - internal

networks:
  internal: